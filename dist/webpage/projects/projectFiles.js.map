{"version":3,"sources":["../../../src/webpage/projects/projectFiles.ts"],"sourcesContent":["import {I18n} from \"../i18n.js\";\nimport {Directory} from \"../utils/utils.js\";\nimport {Project} from \"./project.js\";\ninterface StateEventMap {\n\topen: FileEvent;\n}\n\nclass FileEvent extends Event {\n\tfileName: string;\n\tfile: File;\n\tconstructor(event: string, fileName: string, file: File) {\n\t\tsuper(event);\n\t\tthis.fileName = fileName;\n\t\tthis.file = file;\n\t}\n}\nclass ProjFiles extends EventTarget {\n\tpro: Project;\n\tconstructor(pro: Project) {\n\t\tsuper();\n\t\tthis.pro = pro;\n\t}\n\tasync createHTML() {\n\t\tconst div = document.createElement(\"div\");\n\t\tdiv.classList.add(\"flexttb\", \"projFiles\");\n\n\t\tconst h2 = document.createElement(\"h3\");\n\t\th2.textContent = I18n.project.ProjFileHead(this.pro.name);\n\t\tdiv.append(h2);\n\n\t\tconst files = await this.createDirHTML(this.pro.dir);\n\t\tdiv.append(files);\n\t\treturn div;\n\t}\n\taddEventListener<K extends keyof StateEventMap>(\n\t\ttype: K,\n\t\tlistener: (ev: StateEventMap[K]) => void,\n\t\toptions?: boolean | AddEventListenerOptions,\n\t) {\n\t\t//@ts-expect-error\n\t\tsuper.addEventListener(type, listener, options);\n\t}\n\tasync createDirHTML(\n\t\tdir: Directory,\n\t\tname: string | undefined = undefined,\n\t\tcurDir = \"/\",\n\t): Promise<HTMLDivElement> {\n\t\tconst div = document.createElement(\"div\");\n\t\tdiv.classList.add(\"flexttb\");\n\t\tif (name) {\n\t\t\tconst h3 = document.createElement(\"h3\");\n\t\t\th3.textContent = name;\n\t\t\tdiv.append(h3);\n\t\t\tdiv.classList.add(\"indent\");\n\t\t} else {\n\t\t\tdiv.classList.add(\"fileList\");\n\t\t}\n\t\tfor await (const [name, thing] of dir.getAllInDir()) {\n\t\t\tif (thing instanceof Directory) {\n\t\t\t\tdiv.append(await this.createDirHTML(thing, name, curDir + name + \"/\"));\n\t\t\t} else {\n\t\t\t\tconst span = document.createElement(\"span\");\n\t\t\t\tspan.textContent = name;\n\t\t\t\tspan.onclick = () => {\n\t\t\t\t\tthis.dispatchEvent(new FileEvent(\"open\", curDir + name, thing));\n\t\t\t\t};\n\t\t\t\tdiv.append(span);\n\t\t\t}\n\t\t}\n\t\treturn div;\n\t}\n}\nexport {ProjFiles};\n"],"names":["I18n","Directory","FileEvent","Event","fileName","file","constructor","event","ProjFiles","EventTarget","pro","createHTML","div","document","createElement","classList","add","h2","textContent","project","ProjFileHead","name","append","files","createDirHTML","dir","addEventListener","type","listener","options","undefined","curDir","h3","thing","getAllInDir","span","onclick","dispatchEvent"],"mappings":"AAAA,OAAQA,IAAI,KAAO,YAAa,AAChC,QAAQC,SAAS,KAAO,mBAAoB,AAM5C,OAAMC,kBAAkBC,MACvBC,QAAiB,AACjBC,CAAAA,IAAW,AACXC,aAAYC,KAAa,CAAEH,QAAgB,CAAEC,IAAU,CAAE,CACxD,KAAK,CAACE,MACN,CAAA,IAAI,CAACH,QAAQ,CAAGA,QAChB,CAAA,IAAI,CAACC,IAAI,CAAGA,IACb,CACD,CACA,MAAMG,kBAAkBC,YACvBC,GAAa,AACbJ,aAAYI,GAAY,CAAE,CACzB,KAAK,EACL,CAAA,IAAI,CAACA,GAAG,CAAGA,GACZ,CACA,MAAMC,YAAa,CAClB,MAAMC,IAAMC,SAASC,aAAa,CAAC,OACnCF,IAAIG,SAAS,CAACC,GAAG,CAAC,UAAW,aAE7B,MAAMC,GAAKJ,SAASC,aAAa,CAAC,KAClCG,CAAAA,GAAGC,WAAW,CAAGlB,KAAKmB,OAAO,CAACC,YAAY,CAAC,IAAI,CAACV,GAAG,CAACW,IAAI,EACxDT,IAAIU,MAAM,CAACL,IAEX,MAAMM,MAAQ,MAAM,IAAI,CAACC,aAAa,CAAC,IAAI,CAACd,GAAG,CAACe,GAAG,EACnDb,IAAIU,MAAM,CAACC,OACX,OAAOX,GACR,CACAc,iBACCC,IAAO,CACPC,QAAwC,CACxCC,OAA2C,CAC1C,CAED,KAAK,CAACH,iBAAiBC,KAAMC,SAAUC,QACxC,CACA,MAAML,cACLC,GAAc,CACdJ,KAA2BS,SAAS,CACpCC,OAAS,GAAG,CACc,CAC1B,MAAMnB,IAAMC,SAASC,aAAa,CAAC,OACnCF,IAAIG,SAAS,CAACC,GAAG,CAAC,WAClB,GAAIK,KAAM,CACT,MAAMW,GAAKnB,SAASC,aAAa,CAAC,KAClCkB,CAAAA,GAAGd,WAAW,CAAGG,KACjBT,IAAIU,MAAM,CAACU,IACXpB,IAAIG,SAAS,CAACC,GAAG,CAAC,SACnB,KAAO,CACNJ,IAAIG,SAAS,CAACC,GAAG,CAAC,WACnB,CACA,UAAW,KAAM,CAACK,KAAMY,MAAM,GAAIR,IAAIS,WAAW,GAAI,CACpD,GAAID,iBAAiBhC,UAAW,CAC/BW,IAAIU,MAAM,CAAC,MAAM,IAAI,CAACE,aAAa,CAACS,MAAOZ,KAAMU,OAASV,KAAO,KAClE,KAAO,CACN,MAAMc,KAAOtB,SAASC,aAAa,CAAC,OACpCqB,CAAAA,KAAKjB,WAAW,CAAGG,IACnBc,CAAAA,KAAKC,OAAO,CAAG,KACd,IAAI,CAACC,aAAa,CAAC,IAAInC,UAAU,OAAQ6B,OAASV,KAAMY,OACzD,EACArB,IAAIU,MAAM,CAACa,KACZ,CACD,CACA,OAAOvB,GACR,CACD,CACA,OAAQJ,SAAS,CAAE"}