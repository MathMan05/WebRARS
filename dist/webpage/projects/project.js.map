{"version":3,"sources":["../../../src/webpage/projects/project.ts"],"sourcesContent":["import {Directory} from \"../utils/utils.js\";\n\nclass Project {\n\tname: string;\n\tdir: Directory;\n\n\tprivate constructor(name: string, dir: Directory) {\n\t\tthis.name = name;\n\t\tthis.dir = dir;\n\t}\n\tasync createNewAsm(name: string) {\n\t\tawait this.dir.setString(\n\t\t\tname,\n\t\t\t`.data\n\thello: .asciz \"hello world!\"\n\n.text\nmain:\n\tla a0 hello\n\tli a7 4\n\tecall\n\tli a7 10\n\tecall`,\n\t\t);\n\t\treturn [\n\t\t\tname,\n\t\t\t`.data\n\thello: .asciz \"hello world!\"\n\n.text\nmain:\n\tla a0 hello\n\tli a7 4\n\tecall\n\tli a7 10\n\tecall`,\n\t\t];\n\t}\n\tasync saveAsm(name: string, asm: string) {\n\t\treturn await this.dir.setString(name, asm);\n\t}\n\tasync *getAsm() {\n\t\tfor await (const thing of this.dir.getAllInDir()) {\n\t\t\tif (!(thing[1] instanceof Directory)) {\n\t\t\t\tyield thing as [string, File];\n\t\t\t}\n\t\t}\n\t}\n\tstatic async new(name: string): Promise<Project> {\n\t\tconst home = await Directory.home;\n\t\tconst dir = await home.getDir(name);\n\t\treturn new Project(name, dir);\n\t}\n\tstatic async checkName(name: string): Promise<false | Project> {\n\t\tconst home = await Directory.home;\n\t\tfor await (const [thingName, thing] of home.getAllInDir()) {\n\t\t\tif (thing instanceof Directory) {\n\t\t\t\tif (thingName === name) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst proj = await Project.new(name);\n\t\tawait proj.createNewAsm(\"main.asm\");\n\t\treturn proj;\n\t}\n\tstatic async *getProjects() {\n\t\tconst home = await Directory.home;\n\t\tfor await (const [thingName, thing] of home.getAllInDir()) {\n\t\t\tif (thing instanceof Directory) {\n\t\t\t\tyield new Project(thingName, thing);\n\t\t\t}\n\t\t}\n\t}\n}\nexport {Project};\n"],"names":["Directory","Project","name","dir","createNewAsm","setString","saveAsm","asm","getAsm","thing","getAllInDir","new","home","getDir","checkName","thingName","proj","getProjects"],"mappings":"AAAA,OAAQA,SAAS,KAAO,mBAAoB,AAE5C,OAAMC,QACLC,IAAa,AACbC,CAAAA,GAAe,AAEf,aAAoBD,IAAY,CAAEC,GAAc,CAAE,CACjD,IAAI,CAACD,IAAI,CAAGA,IACZ,CAAA,IAAI,CAACC,GAAG,CAAGA,GACZ,CACA,MAAMC,aAAaF,IAAY,CAAE,CAChC,MAAM,IAAI,CAACC,GAAG,CAACE,SAAS,CACvBH,KACA,CAAC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,CAAC,EAEL,MAAO,CACNA,KACA,CAAC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,CAAC,CACJ,AACF,CACA,MAAMI,QAAQJ,IAAY,CAAEK,GAAW,CAAE,CACxC,OAAO,MAAM,IAAI,CAACJ,GAAG,CAACE,SAAS,CAACH,KAAMK,IACvC,CACA,OAAOC,QAAS,CACf,UAAW,MAAMC,SAAS,IAAI,CAACN,GAAG,CAACO,WAAW,GAAI,CACjD,GAAI,CAAED,CAAAA,KAAK,CAAC,EAAE,WAAYT,SAAQ,EAAI,CACrC,MAAMS,KACP,CACD,CACD,CACA,aAAaE,IAAIT,IAAY,CAAoB,CAChD,MAAMU,KAAO,MAAMZ,UAAUY,IAAI,CACjC,MAAMT,IAAM,MAAMS,KAAKC,MAAM,CAACX,MAC9B,OAAO,IAAID,QAAQC,KAAMC,IAC1B,CACA,aAAaW,UAAUZ,IAAY,CAA4B,CAC9D,MAAMU,KAAO,MAAMZ,UAAUY,IAAI,CACjC,UAAW,KAAM,CAACG,UAAWN,MAAM,GAAIG,KAAKF,WAAW,GAAI,CAC1D,GAAID,iBAAiBT,UAAW,CAC/B,GAAIe,YAAcb,KAAM,CACvB,OAAO,KACR,CACD,CACD,CACA,MAAMc,KAAO,MAAMf,QAAQU,GAAG,CAACT,KAC/B,OAAMc,KAAKZ,YAAY,CAAC,YACxB,OAAOY,IACR,CACA,cAAcC,aAAc,CAC3B,MAAML,KAAO,MAAMZ,UAAUY,IAAI,CACjC,UAAW,KAAM,CAACG,UAAWN,MAAM,GAAIG,KAAKF,WAAW,GAAI,CAC1D,GAAID,iBAAiBT,UAAW,CAC/B,MAAM,IAAIC,QAAQc,UAAWN,MAC9B,CACD,CACD,CACD,CACA,OAAQR,OAAO,CAAE"}