{"version":3,"sources":["../../src/webpage/index.ts"],"sourcesContent":["import {AssemblError} from \"./assembler/assembler.js\";\nimport {Contextmenu} from \"./contextMenu.js\";\nimport {Editor} from \"./editor/editor.js\";\nimport {Console} from \"./emulator/console.js\";\nimport {Etab} from \"./executeTab/etab.js\";\nimport {I18n} from \"./i18n.js\";\nimport {Project} from \"./projects/project.js\";\nconst actionRow = document.getElementById(\"actionRow\");\nif (!actionRow) throw Error(\"action row not in document\");\nconst cons = new Console();\n//Waiting for the translations to load\nawait I18n.done;\nconst fileMenu = new Contextmenu(\"File\");\nfileMenu.addButton(\n\t() => I18n.file.new(),\n\t() => {\n\t\tnewFile.click();\n\t},\n);\nfileMenu.addButton(\n\t() => I18n.file.open(),\n\t() => {\n\t\topenNewFile();\n\t},\n);\nfileMenu.addButton(\n\t() => I18n.file.save(),\n\t() => {\n\t\tfocusedEditor.save();\n\t},\n);\nfileMenu.addButton(\n\t() => I18n.file.saveAll(),\n\t() => {\n\t\teditors.map((_) => _.save());\n\t},\n);\nfileMenu.addButton(\n\t() => I18n.file.saveAs(),\n\t() => {\n\t\tdownloadEditor(focusedEditor);\n\t},\n);\n\nconst fileButton = document.createElement(\"button\");\nfileButton.textContent = I18n.file.file();\nactionRow.append(fileButton);\nfileMenu.bindContextmenu(fileButton, undefined, undefined, true);\n\nconst menu = new Contextmenu(\"run\");\n\nconst assemble = document.getElementById(\"assemble\") as HTMLElement;\nmenu.addButton(\n\t() => I18n.run.assemble(),\n\t() => {\n\t\tassemble.click();\n\t},\n\t{\n\t\tenabled: () => !assemble.classList.contains(\"disabled\"),\n\t},\n);\n\nconst start = document.getElementById(\"start\") as HTMLElement;\nmenu.addButton(\n\t() => I18n.run.run(),\n\t() => {\n\t\tstart.click();\n\t},\n\t{\n\t\tenabled: () => !start.classList.contains(\"disabled\"),\n\t},\n);\n\nconst step = document.getElementById(\"step\") as HTMLElement;\nmenu.addButton(\n\t() => I18n.run.step(),\n\t() => {\n\t\tstep.click();\n\t},\n\t{\n\t\tenabled: () => !step.classList.contains(\"disabled\"),\n\t},\n);\n\nconst backStep = document.getElementById(\"backStep\") as HTMLElement;\nmenu.addButton(\n\t() => I18n.run.backStep(),\n\t() => {\n\t\tbackStep.click();\n\t},\n\t{\n\t\tenabled: () => !backStep.classList.contains(\"disabled\"),\n\t},\n);\n\nconst reset = document.getElementById(\"reset\") as HTMLElement;\nmenu.addButton(\n\t() => I18n.run.reset(),\n\t() => {\n\t\treset.click();\n\t},\n\t{\n\t\tenabled: () => !reset.classList.contains(\"disabled\"),\n\t},\n);\n\nconst runButton = document.createElement(\"button\");\nrunButton.textContent = I18n.run.run();\nactionRow.append(runButton);\nmenu.bindContextmenu(runButton, undefined, undefined, true);\n\nconst area = document.getElementById(\"area\") as HTMLElement;\nif (!area) throw Error(\"area not found\");\nconst editors: Editor[] = [];\n\nlet focusedEditor = editors[0];\n\nconst newFile = document.getElementById(\"newFile\") as HTMLImageElement;\nnewFile.onclick = () => {\n\tsystem.disable();\n\tconst editor = new Editor(\"\", `riscv${editors.length + 1}.asm`, cons);\n\teditors.push(editor);\n\tfocusedEditor = editor;\n\teditArea();\n};\n\nassemble.onclick = () => {\n\tfocusedEditor.assemble();\n};\n\nconst editButton = document.getElementById(\"EditButton\") as HTMLButtonElement;\nconst executeButton = document.getElementById(\"ExecuteButton\") as HTMLButtonElement;\neditButton.onclick = () => {\n\teditArea();\n};\nexecuteButton.onclick = () => {\n\texecuteArea();\n};\nlet system = new Etab();\nconst buttons = new Map<Editor, HTMLButtonElement>();\nconst saved = new Map<Editor, boolean>();\nlet editAreadiv = document.createElement(\"div\");\nlet selectedTab: HTMLElement;\nfunction editArea() {\n\tconst regiArea = document.getElementById(\"regiArea\") as HTMLElement;\n\tregiArea.innerHTML = \"\";\n\tarea.innerHTML = \"\";\n\tconst tabs = document.createElement(\"div\");\n\ttabs.classList.add(\"tabStyle\");\n\tarea.append(tabs);\n\teditButton.classList.add(\"selected\");\n\texecuteButton.classList.remove(\"selected\");\n\tif (editors.length !== 0) {\n\t\tfor (const editor of editors) {\n\t\t\tconst bu = buttons.get(editor);\n\t\t\tif (bu) {\n\t\t\t\tif (editor === focusedEditor) {\n\t\t\t\t\tbu.click();\n\t\t\t\t}\n\t\t\t\ttabs.append(bu);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst button = document.createElement(\"button\");\n\t\t\tbuttons.set(editor, button);\n\t\t\tbutton.textContent = editor.fileName;\n\t\t\ttabs.append(button);\n\t\t\tbutton.addEventListener(\"click\", () => {\n\t\t\t\tif (focusedEditor !== editor) {\n\t\t\t\t\tsystem.disable();\n\t\t\t\t}\n\t\t\t\tfocusedEditor = editor;\n\t\t\t\tif (selectedTab) {\n\t\t\t\t\tselectedTab.classList.remove(\"selected\");\n\t\t\t\t}\n\t\t\t\teditAreadiv.remove();\n\t\t\t\teditAreadiv = editor.createEditor();\n\t\t\t\tarea.append(editAreadiv);\n\t\t\t\tbutton.classList.add(\"selected\");\n\t\t\t\tselectedTab = button;\n\t\t\t});\n\t\t\teditor.addEventListener(\"Assemble\", (e) => {\n\t\t\t\tif (e.sys instanceof AssemblError) {\n\t\t\t\t\tbutton.click();\n\t\t\t\t\ttry {\n\t\t\t\t\t\teditor.giveError(e.sys);\n\t\t\t\t\t} catch {\n\t\t\t\t\t\tconsole.error(e);\n\t\t\t\t\t}\n\t\t\t\t\tcons.addMessage(e.sys.message, true);\n\t\t\t\t} else {\n\t\t\t\t\tsystem.handSystem(e.sys);\n\t\t\t\t\texecuteArea();\n\t\t\t\t}\n\t\t\t});\n\t\t\tsaved.set(editor, true);\n\t\t\teditor.addEventListener(\"save\", () => {\n\t\t\t\tbutton.textContent = editor.fileName;\n\t\t\t\tsaved.set(editor, true);\n\t\t\t\tif (curProject) {\n\t\t\t\t\tcurProject.saveAsm(editor.fileName, editor.string());\n\t\t\t\t} else {\n\t\t\t\t\tdownloadEditor(editor);\n\t\t\t\t}\n\t\t\t});\n\t\t\teditor.addEventListener(\"changed\", () => {\n\t\t\t\tbutton.textContent = editor.fileName + \"*\";\n\t\t\t\tsaved.set(editor, false);\n\t\t\t\tsystem.disable();\n\t\t\t});\n\t\t\tif (editor === focusedEditor) {\n\t\t\t\tbutton.click();\n\t\t\t}\n\t\t}\n\t} else {\n\t\teditAreadiv.remove();\n\t\teditAreadiv = document.createElement(\"div\");\n\t\tarea.append(editAreadiv);\n\t\tconst h = document.createElement(\"h1\");\n\t\th.textContent = I18n.startScreen();\n\n\t\tconst project = document.createElement(\"button\");\n\t\tproject.textContent = I18n.startProject();\n\t\tproject.onclick = () => {\n\t\t\tnewProjectDialog();\n\t\t};\n\t\tconst file = document.createElement(\"button\");\n\t\tfile.textContent = I18n.openFile();\n\t\tfile.onclick = () => {\n\t\t\topenNewFile();\n\t\t};\n\n\t\teditAreadiv.classList.add(\"flexttb\", \"start\");\n\n\t\tconst projectList = document.createElement(\"div\");\n\t\tprojectList.classList.add(\"flexttb\", \"projectList\");\n\n\t\tconst openExisting = document.createElement(\"h4\");\n\t\topenExisting.textContent = I18n.project.openExisting();\n\n\t\t(async () => {\n\t\t\tfor await (const thing of Project.getProjects()) {\n\t\t\t\tconst button = document.createElement(\"button\");\n\t\t\t\tbutton.textContent = thing.name;\n\t\t\t\tbutton.onclick = () => {\n\t\t\t\t\topenProject(thing);\n\t\t\t\t};\n\t\t\t\tprojectList.append(button);\n\t\t\t}\n\t\t})();\n\n\t\teditAreadiv.append(h, project, file, openExisting, projectList);\n\t\tarea.append(editAreadiv);\n\t}\n}\nconst save = document.getElementById(\"save\") as HTMLElement;\nsave.onclick = () => {\n\tif (focusedEditor) {\n\t\tfocusedEditor.save();\n\t}\n};\nfunction newProjectDialog() {\n\tconst dialog = document.createElement(\"dialog\");\n\tdocument.body.append(dialog);\n\tconst p1 = document.createElement(\"h4\");\n\tp1.textContent = I18n.project.name();\n\tdialog.append(p1);\n\n\tconst input = document.createElement(\"input\");\n\tinput.type = \"text\";\n\tdialog.append(input);\n\n\tconst submit = document.createElement(\"button\");\n\tsubmit.textContent = I18n.submit();\n\tdialog.append(submit);\n\tsubmit.onclick = async () => {\n\t\tconst name = input.value;\n\t\tif (name.length === 0) {\n\t\t\talert(I18n.project.pleaseEnterName());\n\t\t\treturn;\n\t\t}\n\t\tconst proj = await Project.checkName(name);\n\t\tif (proj) {\n\t\t\tdialog.remove();\n\t\t\topenProject(proj);\n\t\t} else {\n\t\t\talert(I18n.project.nameTaken());\n\t\t\treturn;\n\t\t}\n\t};\n\n\tdialog.showModal();\n}\nfunction openNewFile() {\n\tconst input = document.createElement(\"input\");\n\tinput.type = \"file\";\n\tinput.accept = \".asm\";\n\tdocument.body.append(input);\n\tinput.click();\n\tinput.remove();\n\tinput.onchange = async () => {\n\t\tif (input.files && input.files.length) {\n\t\t\tlet newEditor: undefined | Editor;\n\t\t\tfor (const file of Array.from(input.files)) {\n\t\t\t\tconst editor = new Editor(await file.text(), file.name, cons);\n\t\t\t\tnewEditor ||= editor;\n\t\t\t\teditors.push(editor);\n\t\t\t}\n\t\t\tif (newEditor) {\n\t\t\t\tfocusedEditor = newEditor;\n\t\t\t}\n\t\t\teditArea();\n\t\t}\n\t};\n}\nfunction downloadEditor(editor: Editor) {\n\tconst text = editor.string();\n\tconst fileName = editor.fileName;\n\tvar blob = new Blob([text]);\n\tvar a = document.createElement(\"a\");\n\ta.download = fileName;\n\ta.href = URL.createObjectURL(blob);\n\ta.dataset.downloadurl = [a.download, a.href].join(\":\");\n\ta.style.display = \"none\";\n\tdocument.body.appendChild(a);\n\ta.click();\n\tdocument.body.removeChild(a);\n\tsetTimeout(function () {\n\t\tURL.revokeObjectURL(a.href);\n\t}, 1500);\n}\nlet curProject: Project | undefined;\nasync function openProject(proj: Project) {\n\tcurProject = proj;\n\tfor await (const thing of proj.getAsm()) {\n\t\tconst editor = new Editor(await thing[1].text(), thing[0], cons);\n\t\tif (!focusedEditor) {\n\t\t\tfocusedEditor = editor;\n\t\t}\n\t\teditors.push(editor);\n\t}\n\teditArea();\n}\nconst consoleElm = document.getElementById(\"console\") as HTMLDivElement;\nconsoleElm.append(cons.makeHtml());\nfunction executeArea() {\n\tarea.innerHTML = \"\";\n\n\teditButton.classList.remove(\"selected\");\n\texecuteButton.classList.add(\"selected\");\n\tcons.messageIClick();\n\tarea.append(system.createHTML());\n}\neditArea();\n"],"names":["AssemblError","Contextmenu","Editor","Console","Etab","I18n","Project","actionRow","document","getElementById","Error","cons","done","fileMenu","addButton","file","new","newFile","click","open","openNewFile","save","focusedEditor","saveAll","editors","map","_","saveAs","downloadEditor","fileButton","createElement","textContent","append","bindContextmenu","undefined","menu","assemble","run","enabled","classList","contains","start","step","backStep","reset","runButton","area","onclick","system","disable","editor","length","push","editArea","editButton","executeButton","executeArea","buttons","Map","saved","editAreadiv","selectedTab","regiArea","innerHTML","tabs","add","remove","bu","get","button","set","fileName","addEventListener","createEditor","e","sys","giveError","console","error","addMessage","message","handSystem","curProject","saveAsm","string","h","startScreen","project","startProject","newProjectDialog","openFile","projectList","openExisting","thing","getProjects","name","openProject","dialog","body","p1","input","type","submit","value","alert","pleaseEnterName","proj","checkName","nameTaken","showModal","accept","onchange","files","newEditor","Array","from","text","blob","Blob","a","download","href","URL","createObjectURL","dataset","downloadurl","join","style","display","appendChild","removeChild","setTimeout","revokeObjectURL","getAsm","consoleElm","makeHtml","messageIClick","createHTML"],"mappings":"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"}